@model CUSrinagar.Models.MeritListsAsPDF
@using CUSrinagar.Extensions

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    @if (Model != null)
    {
        <title>@Model.PDFListType.ToString() of @string.Join(" and ", Model.CourseFullNames).Replace("/", "").Replace("'", "") (Entrance-@Model.Batch)</title>
    }
    else
    {
        <title>CU Srinagar</title>
    }
    <title>RR Preview - CU Srinagar</title>
    <style type="text/css">
        .btn-theme {
            background: #011c27;
            border: 1px solid #84aac9;
            color: #fff;
        }

            .btn-theme:hover {
                background: #545677;
                border: 1px solid #84aac9;
                color: #fff;
            }

        @@media print {
            .IsPrintbody {
                display: none;
            }

            .noneOnPrint {
                display: none;
            }

            .parentdiv {
                margin: 0 auto;
                padding: 0px;
            }

            tbody {
                font-size: 11px !important;
                page-break-inside: avoid !important;
            }

            thead, .thead2 {
                font-size: 11px !important;
                display: table-header-group !important;
            }
        }

        .parentdiv {
            margin: 0 auto;
            padding: 10px;
        }

        table tr td {
            padding: 1px 5px 0px 5px;
        }

        .ctable tr td {
            padding: 19px;
        }

        table tr td, table tr th {
            max-width: 150px;
            word-wrap: break-word !important;
        }

        table, table tr, table tr td, table tr th {
            border: 1px solid black;
            border-collapse: collapse;
        }

        table {
            width: 100%;
        }

        div {
            background-color: #fff;
        }

        .center {
            text-align: center !important;
        }

        .pull-right {
            float: right !important;
        }

        .pull-left {
            float: left !important;
        }
    </style>
</head>
<body style="background-color:grey" class="IsPrintbody">
    <div id="Jspleasewait" style="position:fixed;background-color:rgba(0, 0, 0, 0.20);left:0;top:0;z-index:200;width:100%;height:100%">
        <p style="font-size:30px;font-weight:bold;color:red;margin-top:20%;margin-left:41%">
            Please wait...
        </p>
    </div>
    @if (Model != null && Model.MeritListsDetails.IsNotNullOrEmpty())
    {
        <div class="parentdiv">
            <table>
                <thead>
                    <tr>
                        <th colspan="8">
                            <div class="center">
                                <div>
                                    <h1 style="margin:0">Cluster University Srinagar</h1>
                                    <h3 style="margin:0">
                                        <strong>
                                            @Model.PDFListType.GetEnumDescription() of @string.Join(" and ", Model.CourseFullNames)
                                            @if (Model.PrintProgramme == CUSrinagar.Enums.PrintProgramme.UG)
                                            {
                                                <text>Admission-@Model.Batch</text>
                                            }
                                            else
                                            {
                                                <text>Entrance-@Model.Batch</text>
                                            }
                                        </strong>
                                    </h3>
                                </div>
                            </div>
                        </th>
                    </tr>
                    @{ List<CUSrinagar.Models.MeritLists> _MeritListsDetails =  Model.MeritListsDetails.OrderBy(x => x.EntranceRollNo).ToList(); }
                    @if (Model.PrintProgramme == CUSrinagar.Enums.PrintProgramme.UG && Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.GeneralMeritList)
                    {
                        <tr>
                            <th>Entrance RollNo.</th>
                            <th>CAT Entrance Points</th>
                        </tr>
                    }
                    else if (Model.PrintProgramme == CUSrinagar.Enums.PrintProgramme.UG && Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.CombinedMeritListAcademics)
                    {
                        <tr>
                            <th>Entrance RollNo.</th>
                            <th>CAT Entrance Points</th>
                            <th>12th MarksObt</th>
                            <th>40% of 12th Percentage</th>
                            <th>Total Points</th>
                        </tr>
                    }
                    else if (Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.CombinedMeritListAcademics)
                    {
                        <tr>
                            <th>Entrance RollNo.</th>
                            <th>StudentCategory</th>
                            <th>Subject Entrance Points</th>
                            <th>12th MarksObt</th>
                            <th>40% of 12th Percentage</th>
                            <th>Total Points</th>
                        </tr>
                    }
                    else
                    {
                        <tr>
                            <th>Entrance RollNo.</th>
                            @if (!(Model.CourseFullNames[0].ToLower().Contains("graduation") || Model.CourseFullNames[0].ToLower().Contains("aptitude")))
                            {
                                <th>Subject Entrance Points</th>
                            }
                            else
                            {
                                <th>CAT Entrance Points</th>
                            }
                            @if (Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.CombinedMeritList)
                            {
                                <th>CAT Entrance Points</th>
                                <th>Total</th>
                            }
                        </tr>
                    }
                </thead>
                <tbody>
                    @if (Model.PrintProgramme == CUSrinagar.Enums.PrintProgramme.UG && Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.GeneralMeritList)
                    {
                        foreach (var student in _MeritListsDetails)
                        {
                            <tr>
                                <td>@student.EntranceRollNo</td>
                                <td>@student.CATEntrancePoints</td>
                            </tr>
                        }
                    }
                    else if (Model.PrintProgramme == CUSrinagar.Enums.PrintProgramme.UG && Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.CombinedMeritListAcademics)
                    {
                        foreach (var student in _MeritListsDetails)
                        {
                            <tr>
                                <th>@student.EntranceRollNo</th>
                                <td>@student.CATEntrancePoints</td>
                                <td>@student.MarksObtained12th</td>
                                <td>@student.PointsFrom12th</td>
                                <td>@student.TotalPoints</td>
                            </tr>
                        }
                    }
                    else if (Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.CombinedMeritListAcademics)
                    {
                        foreach (var student in _MeritListsDetails)
                        {
                            <tr style="font-size:14px;">
                                <th>@student.EntranceRollNo</th>
                                <td>@student.StudentCategory</td>
                                <td>@student.SubjectEntrancePoints</td>
                                <td>@student.MarksObtained12th</td>
                                <td>@student.PointsFrom12th</td>
                                <th>@student.TotalPoints</th>
                            </tr>
                        }
                    }
                    else
                    {
                        foreach (var student in _MeritListsDetails)
                        {
                            <tr style="font-size:14px;">
                                <th>@student.EntranceRollNo</th>

                                @if (!(Model.CourseFullNames[0].ToLower().Contains("graduation") || Model.CourseFullNames[0].ToLower().Contains("aptitude")))
                                {
                                    <td class="center">@student.SubjectEntrancePoints</td>
                                }
                                else
                                {
                                    <td class="center">@student.CATEntrancePoints</td>
                                }
                                @if (Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.CombinedMeritList)
                                {
                                    <td class="center">
                                        @if (student.CATEntrancePoints == null)
                                        {
                                            <text>Absent</text>
                                        }
                                        else
                                        {
                                            @student.CATEntrancePoints
                                        }
                                    </td>
                                    <td class="center">
                                        @if (student.CATEntrancePoints == null)
                                        {
                                            <text>Not Eligible</text>
                                        }
                                        else
                                        {
                                            @student.TotalPoints
                                        }
                                    </td>
                                }
                            </tr>
                        }
                    }
                    <tr>
                        @if (Model.PrintProgramme == CUSrinagar.Enums.PrintProgramme.UG && Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.GeneralMeritList)
                        {
                            <th colspan="2" style="font-size:18px;">@Model.MSGOnBottomOfPDF</th>
                        }
                        else if (Model.PrintProgramme == CUSrinagar.Enums.PrintProgramme.UG && Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.CombinedMeritListAcademics)
                        {
                            <th colspan="5" style="font-size:18px;">@Model.MSGOnBottomOfPDF</th>
                        }
                        else if (Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.CombinedMeritList)
                        {
                            <th colspan="5" style="font-size:18px;">@Model.MSGOnBottomOfPDF</th>
                        }
                        else if (Model.PDFListType == CUSrinagar.Enums.EntrancePDFListType.CombinedMeritListAcademics)
                        {
                            <th colspan="6" style="font-size:18px;">@Model.MSGOnBottomOfPDF</th>
                        }
                        else
                        {
                            <th colspan="3" style="font-size:18px;">@Model.MSGOnBottomOfPDF</th>
                        }
                    </tr>
                </tbody>
            </table>
        </div>
    }
    else
    { <div class="parentdiv">
            No Record Found
        </div>
    }

    <div class="noneOnPrint" style="margin-left:-14px;height:40px;background-color:lightslategrey;width:100%;position:fixed;bottom:0;z-index:100;text-align:center;padding-top:10px">
        <a style="height: 32px;color:white" href="https://www.wikihow.com/Save-a-Web-Page-as-a-PDF-in-Google-Chrome" target="_blank"><b>See How to Save as PDF</b></a>&nbsp;&nbsp;&nbsp;
        <button style="height: 32px;" href="#" class="btn btn-theme" onclick="window.print();"><b>Download or Print</b></button>
        &nbsp;&nbsp;&nbsp;<a style="height: 32px;" href="/CUSrinagarAdminPanel/Entrance/EntranceCenters" class=""><b>Back</b></a>
    </div>

    <script src="@Url.Content("~/Content/ThemeAdmin/Content/Scripts/Libraries/jquery-2.1.4.min.js")"></script>
    <script src="@Url.Content("~/Content/ThemePublic/Libraries/disableBack.js")"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#Jspleasewait").css("display", "none");
            $("body").removeClass("IsPrintbody");
        });
    </script>
</body>
</html>